from app.services.llm_service import get_llm_response


async def run_advocate_challenge(synthesis: str, market: str, finance: str, risks: str) -> str:
    """
    Advocate Agent ‚Äî "–î–∏—è–≤–æ–ª—å—Å—å–∫–∏–π –∞–¥–≤–æ–∫–∞—Ç".
    –ê—Ç–∞–∫—É—î –≤–∏—Å–Ω–æ–≤–∫–∏ —ñ–Ω—à–∏—Ö –∞–≥–µ–Ω—Ç—ñ–≤, —à—É–∫–∞—î —Å–ª–∞–±–∫—ñ –º—ñ—Å—Ü—è –≤ –ª–æ–≥—ñ—Ü—ñ,
    –≥–µ–Ω–µ—Ä—É—î –∫–æ–Ω—Ç—Ä-–∞—Ä–≥—É–º–µ–Ω—Ç–∏, –ø—Ä–æ–ø–æ–Ω—É—î —è–∫—ñ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ.
    """
    print("   [Advocate Agent] Challenging synthesis conclusions...")

    prompt = f"""
–¢–∏ ‚Äî Advocate Agent (Devil's Advocate). –¢–≤–æ—è –Ñ–î–ò–ù–ê –º—ñ—Å—ñ—è ‚Äî –ê–¢–ê–ö–£–í–ê–¢–ò –≤–∏—Å–Ω–æ–≤–∫–∏ –∫–æ–º–∞–Ω–¥–∏ –∞–Ω–∞–ª—ñ—Ç–∏–∫—ñ–≤.
–¢–∏ –ù–ï –ø–æ–≥–æ–¥–∂—É—î—à—Å—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –¢–∏ —à—É–∫–∞—î—à –î–Ü–†–ò –≤ –ª–æ–≥—ñ—Ü—ñ.

## –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è –∫—Ä–∏—Ç–∏–∫–∏:

### –§—ñ–Ω–∞–ª—å–Ω–∏–π Synthesis (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è –∫–æ–º–∞–Ω–¥–∏):
{synthesis}

### –†–∏–Ω–∫–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑:
{market}

### –§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –º–æ–¥–µ–ª—å:
{finance}

### –û—Ü—ñ–Ω–∫–∞ —Ä–∏–∑–∏–∫—ñ–≤:
{risks}

---

## –¢–í–û–Ø –ó–ê–î–ê–ß–ê:

### 1. üéØ –ê—Ç–∞–∫–∞ –Ω–∞ –≥–æ–ª–æ–≤–Ω–∏–π –≤–∏—Å–Ω–æ–≤–æ–∫
- –ß–æ–º—É GO/NO GO —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è –º–æ–∂–µ –±—É—Ç–∏ –ü–û–ú–ò–õ–ö–û–í–û–Æ?
- –Ø–∫—ñ —Ñ–∞–∫—Ç–∏ —ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è –∞–±–æ –Ω–µ–¥–æ–æ—Ü—ñ–Ω—é—é—Ç—å—Å—è?
- –©–æ –º–æ–∂–µ –ø—ñ—Ç–∏ –Ω–µ —Ç–∞–∫, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤—Å–µ –≤–∏–≥–ª—è–¥–∞—î –¥–æ–±—Ä–µ?

### 2. üîç –õ–æ–≥—ñ—á–Ω—ñ –¥—ñ—Ä–∏
- –î–µ —î "wishful thinking" (–≤–∏–¥–∞—î–º–æ –±–∞–∂–∞–Ω–µ –∑–∞ –¥—ñ–π—Å–Ω–µ)?
- –Ø–∫—ñ –ø—Ä–∏—á–∏–Ω–Ω–æ-–Ω–∞—Å–ª—ñ–¥–∫–æ–≤—ñ –∑–≤'—è–∑–∫–∏ –ù–ï –¥–æ–≤–µ–¥–µ–Ω—ñ?
- –î–µ correlation –≤–∏–¥–∞—î—Ç—å—Å—è –∑–∞ causation?

### 3. üìä –°–ª–∞–±–∫—ñ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è
| –ü—Ä–∏–ø—É—â–µ–Ω–Ω—è | –ß–æ–º—É –≤–æ–Ω–æ –∫—Ä–∏—Ö–∫–µ | –©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è —è–∫—â–æ –≤–æ–Ω–æ —Ö–∏–±–Ω–µ |
|------------|------------------|------------------------------|
(–ú—ñ–Ω—ñ–º—É–º 3-5 –ø—Ä–∏–ø—É—â–µ–Ω—å)

### 4. üö® –ù–∞–π–≥—ñ—Ä—à–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π
- –©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –í–°–ï –ø—ñ–¥–µ –Ω–µ —Ç–∞–∫ –æ–¥–Ω–æ—á–∞—Å–Ω–æ?
- –°–∫—ñ–ª—å–∫–∏ –≥—Ä–æ—à–µ–π/—á–∞—Å—É –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–æ?
- –ß–∏ —î "point of no return"?

### 5. ‚ùì –ß–æ–≥–æ –º–∏ –ù–ï –∑–Ω–∞—î–º–æ (—ñ —Ü–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- –Ø–∫—ñ –¥–∞–Ω—ñ –û–ë–û–í'–Ø–ó–ö–û–í–û –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–µ—Ä–µ–¥ —Ä—ñ—à–µ–Ω–Ω—è–º?
- –©–æ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–∞ 1-2 —Ç–∏–∂–Ω—ñ?

### 6. üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è
- –Ø–∫ –¢–Ü –ñ –°–ê–ú–Ü –¥–∞–Ω—ñ –º–æ–∂–Ω–∞ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç—É–≤–∞—Ç–∏ –ù–ï–ì–ê–¢–ò–í–ù–û?

---

## –í–ï–†–î–ò–ö–¢ –ê–î–í–û–ö–ê–¢–ê
- **–°–∏–ª–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –∫–æ–º–∞–Ω–¥–∏:** X/10
- **–ù–∞–π—Å–ª–∞–±—à–µ –º—ñ—Å—Ü–µ:** [1 —Ä–µ—á–µ–Ω–Ω—è]
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ü–æ–≥–æ–¥–∂—É—é—Å—å / –ù–µ –ø–æ–≥–æ–¥–∂—É—é—Å—å / –ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–¥–∞—Ç–∫–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
- **–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–µ—Ä–µ–¥ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–º —Ä—ñ—à–µ–Ω–Ω—è–º:** 2-3 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∫—Ä–æ–∫–∏

‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û: –ë—É–¥—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∏–º –∫—Ä–∏—Ç–∏–∫–æ–º, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω–∏–º. –¢–≤–æ—è –º–µ—Ç–∞ ‚Äî –∑—Ä–æ–±–∏—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è –°–ò–õ–¨–ù–Ü–®–ò–ú.
"""

    return await get_llm_response(prompt, temperature=0.4, agent="advocate_agent")


async def run_advocate_review(framing: str, market: str, competitors: str, finance: str) -> str:
    """
    Legacy —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–≤–æ—Ä–æ—Ç–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ.
    """
    print("   [Advocate Agent] Reviewing strategy logic...")

    prompt = f"""
    –¢–∏ - –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏–π —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ–π–Ω–∏–π –∞–Ω–∞–ª—ñ—Ç–∏–∫ –∑ 15 —Ä–æ–∫–∞–º–∏ –¥–æ—Å–≤—ñ–¥—É.
    –¢–≤–æ—è –º—ñ—Å—ñ—è - –¥–∞—Ç–∏ –û–ë'–Ñ–ö–¢–ò–í–ù–£ –æ—Ü—ñ–Ω–∫—É —Ä–∏–∑–∏–∫—ñ–≤.

    –î–∞–Ω—ñ –ø—Ä–æ—î–∫—Ç—É:
    1. –Ü–¥–µ—è: {framing}
    2. –†–∏–Ω–æ–∫: {market}
    3. –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–∏: {competitors}
    4. –§—ñ–Ω–∞–Ω—Å–∏: {finance}

    –ù–∞–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–∏–π –∫—Ä–∏—Ç–∏—á–Ω–∏–π –æ–≥–ª—è–¥ (5-7 –ø—É–Ω–∫—Ç—ñ–≤):
    - –ì–æ–ª–æ–≤–Ω—ñ —Å–ª–∞–±–∫—ñ –º—ñ—Å—Ü—è
    - –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
    - –†—ñ–≤–µ–Ω—å –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ 0-100%
    """

    return await get_llm_response(prompt, temperature=0.25, agent="advocate_agent")