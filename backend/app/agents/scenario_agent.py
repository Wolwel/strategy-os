from app.services.llm_service import get_llm_response

async def run_scenario_planning(framing: str, market: str, risks: str) -> str:
    """
    –§–æ—Ä–º—É—î 2‚Äì4 —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω—ñ –æ–ø—Ü—ñ—ó (–ø—ñ–ª–æ—Ç/–ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ/–∞–≥—Ä–µ—Å–∏–≤–Ω–∏–π –≤–∏—Ö—ñ–¥/no-go) –∑ –º–µ—Ç—Ä–∏–∫–∞–º–∏ —Ç–∞ –≥–µ–π—Ç–∞–º–∏.
    """
    print("   üß≠ [Scenario Planner] Building strategic options...")

    prompt = f"""
–¢–∏ ‚Äî Scenario Planner (Strategic Options). –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–µ "–≤–≥–∞–¥—É–≤–∞—Ç–∏ –º–∞–π–±—É—Ç–Ω—î",
–∞ –∑–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ 2‚Äì4 –†–Ü–ó–ù–Ü —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó –¥—ñ–π —ñ –ø–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –≤–∏–±—Ä–∞—Ç–∏ –Ω–∞–π–∫—Ä–∞—â—É.

–ö–æ–Ω—Ç–µ–∫—Å—Ç:
1) –ó–∞–¥–∞—á–∞ (brief): {framing}
2) –†–∏–Ω–æ–∫: {market}
3) –†–∏–∑–∏–∫–∏: {risks}

–í–∏–º–æ–≥–∏ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É:
- –°—Ñ–æ—Ä–º—É–π —Ä—ñ–≤–Ω–æ 4 –æ–ø—Ü—ñ—ó (—è–∫—â–æ —è–∫–∞—Å—å –Ω–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å ‚Äî –≤—Å–µ –æ–¥–Ω–æ –¥–æ–¥–∞–π, –∞–ª–µ –ø–æ—è—Å–Ω–∏ —á–æ–º—É):
  1) üöÄ Aggressive Entry / —à–≤–∏–¥–∫–∏–π –≤–∏—Ö—ñ–¥ —ñ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
  2) üß™ Pilot / MVP Validation (–ø—ñ–ª–æ—Ç + –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≥—ñ–ø–æ—Ç–µ–∑)
  3) ü§ù Partnership / Channel strategy (–ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ/—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó/—Ä–µ—Å–µ–ª–µ—Ä–∏)
  4) üõë No-Go / Wait (–≤—ñ–¥–º–æ–≤–∞ –∞–±–æ –ø–∞—É–∑–∞ –∑ —É–º–æ–≤–∞–º–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è)
- –î–ª—è –ö–û–ñ–ù–û–á –æ–ø—Ü—ñ—ó –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –≤–∫–∞–∂–∏:

### –û–ø—Ü—ñ—è N: –ù–∞–∑–≤–∞
- –ö–æ–ª–∏ –æ–±–∏—Ä–∞—Ç–∏ (—Ç—Ä–∏–≥–µ—Ä–∏/—É–º–æ–≤–∏): 2‚Äì4 –º–∞—Ä–∫–µ—Ä–∏
- –©–æ —Ä–æ–±–∏–º–æ (–ø–ª–∞–Ω 30/60/90 –¥–Ω—ñ–≤): –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∫—Ä–æ–∫–∏
- –ü–ª—é—Å–∏ / –ú—ñ–Ω—É—Å–∏
- –†–µ—Å—É—Ä—Å–∏: –ª—é–¥–∏ (—Ä–æ–ª—ñ), –±—é–¥–∂–µ—Ç (—è–∫—â–æ –Ω–µ–º–∞—î —Ü–∏—Ñ—Ä ‚Äî –¥—ñ–∞–ø–∞–∑–æ–Ω –∞–±–æ "–ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–∞–Ω—ñ"), —á–∞—Å
- –ö–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É: MRR/GMV, –º–∞—Ä–∂–∞, CAC, –∫–æ–Ω–≤–µ—Ä—Å—ñ—è, retention/runway (—è–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ)
- –û—Å–Ω–æ–≤–Ω—ñ —Ä–∏–∑–∏–∫–∏ + –º—ñ—Ç–∏–≥–∞—Ü—ñ—ó (2‚Äì4)
- Decision gate / Stop criteria: —â–æ –º–∞—î —Å—Ç–∞—Ç–∏—Å—å —ñ –¥–æ –∫–æ–ª–∏, —â–æ–±:
  - –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏,
  - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏—Å—å –Ω–∞ —ñ–Ω—à—É –æ–ø—Ü—ñ—é,
  - –∑—É–ø–∏–Ω–∏—Ç–∏.

–ü—ñ—Å–ª—è –æ–ø—Ü—ñ–π –∑—Ä–æ–±–∏:
1) –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω—É —Ç–∞–±–ª–∏—Ü—é (Markdown) –∑ –∫–æ–ª–æ–Ω–∫–∞–º–∏: –û–ø—Ü—ñ—è | –®–≤–∏–¥–∫—ñ—Å—Ç—å | –†–∏–∑–∏–∫ | –í–∏—Ç—Ä–∞—Ç–∏ | –ü–æ—Ç–µ–Ω—Ü—ñ–∞–ª | –ö–æ–ª–∏ –æ–±–∏—Ä–∞—Ç–∏
2) –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é: —è–∫—É –æ–ø—Ü—ñ—é –±—Ä–∞—Ç–∏ –∑–∞—Ä–∞–∑ —è–∫ –±–∞–∑–æ–≤—É + 3‚Äì5 next steps –Ω–∞ 14 –¥–Ω—ñ–≤
3) Confidence (–Ω–∏–∑—å–∫–∞/—Å–µ—Ä–µ–¥–Ω—è/–≤–∏—Å–æ–∫–∞) + –∫–ª—é—á–æ–≤—ñ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è, —è–∫—ñ –Ω–∞–π–±—ñ–ª—å—à–µ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —Ä—ñ—à–µ–Ω–Ω—è

–í–ê–ñ–õ–ò–í–û:
- –ù–µ –≤–∏–≥–∞–¥—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —á–∏—Å–ª–∞, —è–∫—â–æ —ó—Ö –Ω–µ–º–∞—î —É –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö.
  –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ü–∏—Ñ—Ä–∏ ‚Äî —è–≤–Ω–æ –Ω–∞–ø–∏—à–∏, —è–∫—ñ —Å–∞–º–µ –¥–∞–Ω—ñ —Ç—Ä–µ–±–∞ –¥–∞—Ç–∏, —ñ –ø–æ–∫–∞–∂–∏ —Ñ–æ—Ä–º—É–ª–∏/–ª–æ–≥—ñ–∫—É.
- –ü–∏—à–∏ —Å—Ç–∏—Å–ª–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ, Markdown.
"""

    return await get_llm_response(prompt, temperature=0.35, agent="scenario_agent")