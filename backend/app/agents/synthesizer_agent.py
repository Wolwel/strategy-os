from app.services.llm_service import get_llm_response

async def run_synthesis(framing, market, competitors, finance, risks):
    """
    –¶–µ "Output Agent" + "Decision Synthesizer" + "Scenario Planner".
    –í—ñ–Ω –∑–±–∏—Ä–∞—î –≤—Å–µ –¥–æ –∫—É–ø–∏ —ñ –≤–∏–¥–∞—î —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è C-Level.
    """
    print("   [Synthesizer] Compiling Executive Summary...")
    
    prompt = f"""
    –¢–∏ - Chief Strategy Officer (CSO). –¢–≤–æ—è —Ü—ñ–ª—å - —á–µ—Å–Ω–æ —Å–∏–Ω—Ç–µ–∑—É–≤–∞—Ç–∏ –≤—Å—ñ –∑–≤—ñ—Ç–∏ –∞–≥–µ–Ω—Ç—ñ–≤ —É —Ñ—ñ–Ω–∞–ª—å–Ω—É –∑–∞–ø–∏—Å–∫—É –¥–ª—è CEO/CFO.

    –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:
    1. –ó–∞–¥–∞—á–∞: {framing}
    2. –†–∏–Ω–æ–∫: {market}
    3. –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–∏: {competitors}
    4. –§—ñ–Ω–∞–Ω—Å–∏: {finance}
    5. –†–∏–∑–∏–∫–∏: {risks}

    ‚ö†Ô∏è –ü–†–ê–í–ò–õ–ê:
    - –Ø–∫—â–æ –¥–∞–Ω–∏—Ö –∑–∞–º–∞–ª–æ, —Å–∫–∞–∂–∏ –ø—Ä–æ —Ü–µ —ñ –∑–Ω–∏–∑—å –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å.
    - –û—Ü—ñ–Ω—é–π –û–ë'–Ñ–ö–¢–ò–í–ù–û: –±–∞—á–∏ —è–∫ —Ä–∏–∑–∏–∫–∏, —Ç–∞–∫ —ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ.
    - GO/NO GO –º–∞—î –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –±–∞–ª–∞–Ω—Å —Ä–∏–∑–∏–∫—ñ–≤ —ñ –ø–æ—Ç–µ–Ω—Ü—ñ–∞–ª—É.
    - –Ø–∫—â–æ —ñ–¥–µ—è –º–∞—î –ø–æ—Ç–µ–Ω—Ü—ñ–∞–ª, –∞–ª–µ –ø–æ—Ç—Ä–µ–±—É—î –¥–æ–æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è - —Ä–µ–∫–æ–º–µ–Ω–¥—É–π –ø—ñ–ª–æ—Ç.

    –¢–≤–æ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å —É Markdown –∑ 4 —á–∞—Å—Ç–∏–Ω:

    ### 1) GO / NO GO
    - –í–µ—Ä–¥–∏–∫—Ç: –¢–∞–∫ / –ù—ñ / –õ–∏—à–µ –ø—ñ—Å–ª—è —É–º–æ–≤ X.
    - –†—ñ–≤–µ–Ω—å –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ (0-100%) —ñ 2-3 –∫–ª—é—á–æ–≤—ñ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è.

    ### 2) –ö–ª—é—á–æ–≤—ñ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è
    - –°–ø–∏—Å–æ–∫ 5-7 –ø—Ä–∏–ø—É—â–µ–Ω—å –∑ —Ä–∏–∑–∏–∫–æ–º –ø–æ–º–∏–ª–∫–∏ (–Ω–∏–∑—å–∫–∏–π/—Å–µ—Ä–µ–¥–Ω—ñ–π/–≤–∏—Å–æ–∫–∏–π).

    ### 3) –°—Ü–µ–Ω–∞—Ä–Ω–∏–π –æ–≥–ª—è–¥ (–∫–æ—Ä–æ—Ç–∫–æ)
    - üü¢ –û–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω–∏–π: 1-2 –º–∞—Ä–∫–µ—Ä–∏ (—â–æ –º–∞—î —Å—Ç–∞—Ç–∏—Å—å).
    - üü° –†–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π: 1-2 –º–∞—Ä–∫–µ—Ä–∏.
    - üî¥ –ü–µ—Å–∏–º—ñ—Å—Ç–∏—á–Ω–∏–π: 1-2 –º–∞—Ä–∫–µ—Ä–∏.

    ### 4) Next steps (–ø–µ—Ä—à—ñ 30 –¥–Ω—ñ–≤)
    - 3-5 –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –¥—ñ–π –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–º —Ä–æ–ª—è–º–∏ (—è–∫—â–æ –≤—ñ–¥–æ–º–æ) —ñ –æ—á—ñ–∫—É–≤–∞–Ω–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.

    –ë—É–¥—å –ª–∞–∫–æ–Ω—ñ—á–Ω–∏–º. –î–∞–≤–∞–π –ó–ë–ê–õ–ê–ù–°–û–í–ê–ù–£ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é:
    - –Ø–∫—â–æ –ø–µ—Ä–µ–≤–∞–≥–∏ > —Ä–∏–∑–∏–∫–∏ ‚Üí GO (–º–æ–∂–ª–∏–≤–æ –∑ —É–º–æ–≤–∞–º–∏)
    - –Ø–∫—â–æ —Ä–∏–∑–∏–∫–∏ –∫–µ—Ä–æ–≤–∞–Ω—ñ ‚Üí –ü—ñ–ª–æ—Ç/MVP
    - –Ø–∫—â–æ —Ä–∏–∑–∏–∫–∏ –∫—Ä–∏—Ç–∏—á–Ω—ñ —ñ –Ω–µ–≤–∏–ø—Ä–∞–≤–Ω—ñ ‚Üí NO GO
    
    –ù–µ –±—É–¥—å –Ω—ñ –Ω–∞–¥—Ç–æ –æ–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω–∏–º, –Ω—ñ –Ω–∞–¥—Ç–æ –ø–µ—Å–∏–º—ñ—Å—Ç–∏—á–Ω–∏–º.
    """

    return await get_llm_response(prompt, temperature=0.25, agent="synthesizer_agent")